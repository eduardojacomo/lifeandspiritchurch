
alterado 2026-01-25
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    match /images/{imageId} {
      // Para ESCRITA (upload), verificamos autenticação E que seja uma imagem.
      allow write: if request.auth != null && request.resource.contentType.matches('image/.*');
      // Para LEITURA (acessar), basta verificar a autenticação.
      allow read: if request.auth != null;
    }
    // Mantém a negação para outras pastas/arquivos
    match /{otherPaths=**} {
      allow read, write: if false;
    }
  }
}

/*2026-02-10*/
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    
    // Função auxiliar para validar se o arquivo é uma imagem
    function isImage() {
      return request.resource.contentType.matches('image/.*');
    }

    // Pasta de imagens gerais (Hero, Seções, etc)
    match /images/{imageId} {
      allow read: if true;
      allow write: if request.auth != null && isImage();
      // Permitir exclusão apenas para usuários autenticados
      allow delete: if request.auth != null;
    }

    // Pasta específica para os Eventos da Agenda
    match /events/{allPaths=**} {
      allow read: if true;
      allow write: if request.auth != null && isImage();
      allow delete: if request.auth != null;
    }
    
    match /team/{allPaths=**} {
      allow read: if true;
      allow write: if request.auth != null && isImage();
      allow delete: if request.auth != null;
    }

		match /activities/{allPaths=**} {
      allow read: if true;
      allow write: if request.auth != null && isImage();
      allow delete: if request.auth != null;
    }
    
    // Bloqueio Global de Segurança
    match /{allPaths=**} {
      allow read, write: if false;
    }
  }
}


/*antiga*/
regras a serem aplicadas no firebaserules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // Coleção de imagens do Hero
    match /images/{document} {
      allow read: if true; // Público para o banner carregar
      allow write: if request.auth != null; // Só admin/logado grava
    }

    // Se você estiver usando imagens dentro de atividades, libere aqui também:
    match /activities/{activityId}/images/{imgId} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    // Opcional: regras para o restante da coleção activities
    match /activities/{document=**} {
      allow read: if true;
      allow write: if request.auth != null;
    }
  }
}